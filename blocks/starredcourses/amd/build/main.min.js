define(["jquery","core/notification","block_starredcourses/repository","core/paged_content_factory","core/pubsub","core/templates","core_course/events"],function(a,b,c,d,e,f,g){var h={STARRED_COURSES_REGION_VIEW:'[data-region="starred-courses-view"]',STARRED_COURSES_REGION:'[data-region="starred-courses-view-content"]'},i=5,j=function(b,c){if(c.length>0)return f.render("block_starredcourses/view-cards",{courses:c});var d=a(h.STARRED_COURSES_REGION_VIEW).attr("data-nocoursesimg");return f.render("block_starredcourses/no-courses",{nocoursesimg:d})},k=function(a,e){var g=a.find(h.STARRED_COURSES_REGION);d.createWithLimit(i,function(b,d){var f=[];return b.forEach(function(b){var g={limit:i,offset:b.offset,userid:e},h=c.getStarredCourses(g).then(function(c){return c.length>0?j(a,c):(d.allItemsLoaded(b.pageNumber),j(a,c))});f.push(h)}),f}).then(function(a,b){return f.replaceNodeContents(g,a,b)})["catch"](b.exception)},l=function(a,b){e.subscribe(g.favourited,function(){k(a,b)}),e.subscribe(g.unfavorited,function(){k(a,b)})},m=function(b){b=a(b);var c=b.data("userid");l(b,c),k(b,c)};return{init:m}});