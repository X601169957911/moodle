{"version":3,"sources":["../../../../src/local/content/section/collapseall.js"],"names":["collapseall","collapsemenu","document","getElementById","addEventListener","action","classList","contains","querySelectorAll","forEach","collapsecontainer","collapse","on","allcollapsed","each","_","add","allexpanded","remove"],"mappings":"kGAuBA,uDAEA,GAAMA,CAAAA,CAAW,CAAG,UAAM,CACtB,GAAMC,CAAAA,CAAY,CAAGC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,CAArB,CACAF,CAAY,CAACG,gBAAb,CAA8B,OAA9B,CAAuC,UAAM,CACzC,GAAIC,CAAAA,CAAM,CAAG,MAAb,CACA,GAAIJ,CAAY,CAACK,SAAb,CAAuBC,QAAvB,CAAgC,WAAhC,CAAJ,CAAkD,CAC9CF,CAAM,CAAG,MACZ,CAEDH,QAAQ,CAACM,gBAAT,CAA0B,8BAA1B,EAA0DC,OAA1D,CAAkE,SAAAC,CAAiB,CAAI,CACnF,cAAEA,CAAF,EAAqBC,QAArB,CAA8BN,CAA9B,CACH,CAFD,CAGH,CATD,EAWA,cAAE,8BAAF,EAAkCO,EAAlC,CAAqC,oBAArC,CAA2D,UAAM,CAC7D,GAAIC,CAAAA,CAAY,GAAhB,CACA,cAAE,8BAAF,EAAkCC,IAAlC,CAAuC,SAACC,CAAD,CAAIL,CAAJ,CAA0B,CAC7D,GAAIA,CAAiB,CAACJ,SAAlB,CAA4BC,QAA5B,CAAqC,MAArC,CAAJ,CAAkD,CAC9CM,CAAY,GACf,CACJ,CAJD,EAKA,GAAIA,CAAJ,CAAkB,CACdZ,CAAY,CAACK,SAAb,CAAuBU,GAAvB,CAA2B,WAA3B,CACH,CACJ,CAVD,EAYA,cAAE,8BAAF,EAAkCJ,EAAlC,CAAqC,mBAArC,CAA0D,UAAM,CAC5D,GAAIK,CAAAA,CAAW,GAAf,CACA,cAAE,8BAAF,EAAkCH,IAAlC,CAAuC,SAACC,CAAD,CAAIL,CAAJ,CAA0B,CAC7D,GAAI,CAACA,CAAiB,CAACJ,SAAlB,CAA4BC,QAA5B,CAAqC,MAArC,CAAL,CAAmD,CAC/CU,CAAW,GACd,CACJ,CAJD,EAMA,GAAIA,CAAJ,CAAiB,CACbhB,CAAY,CAACK,SAAb,CAAuBY,MAAvB,CAA8B,WAA9B,CACH,CACJ,CAXD,CAYH,CArCD,CAuCAlB,CAAW,E","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This component is used to control the expand/collapse all feature for course sections .\n *\n * @module     core_courseformat/local/content/section/collapseall\n * @copyright  2021 Bas Brands <bas@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nconst collapseall = () => {\n    const collapsemenu = document.getElementById('collapsesections');\n    collapsemenu.addEventListener('click', () => {\n        let action = 'hide';\n        if (collapsemenu.classList.contains('collapsed')) {\n            action = 'show';\n        }\n\n        document.querySelectorAll('.course-content-item-content').forEach(collapsecontainer => {\n            $(collapsecontainer).collapse(action);\n        });\n    });\n\n    $('.course-content-item-content').on('hidden.bs.collapse', () => {\n        let allcollapsed = true;\n        $('.course-content-item-content').each((_, collapsecontainer) => {\n            if (collapsecontainer.classList.contains('show')) {\n                allcollapsed = false;\n            }\n        });\n        if (allcollapsed) {\n            collapsemenu.classList.add('collapsed');\n        }\n    });\n\n    $('.course-content-item-content').on('shown.bs.collapse', () => {\n        let allexpanded = true;\n        $('.course-content-item-content').each((_, collapsecontainer) => {\n            if (!collapsecontainer.classList.contains('show')) {\n                allexpanded = false;\n            }\n        });\n\n        if (allexpanded) {\n            collapsemenu.classList.remove('collapsed');\n        }\n    });\n};\n\ncollapseall();\n"],"file":"collapseall.min.js"}