
$box-shadow-drawer-left: -0.25rem .25rem .8rem rgba($black, .025) !default;
$box-shadow-drawer-right: 0 .25rem .8rem rgba($black, .025) !default;

@mixin drawer() {
    transition: left 0.5s ease, right 0.5s ease, top 0.5s ease, bottom 0.5s ease;
    background-color: $body-bg;
    z-index: $zindex-popover;
    position: fixed;
    height: 100vh;
    top: 0;
}

@mixin drawertypes() {
    &.drawer-left,
    &.drawer-right {
        width: 350px;
        max-width: 350px;
    }
    &.drawer-right {
        right: -360px;
        @include box-shadow($box-shadow-drawer-right);
        &.show {
            right: 0;
        }
    }
    &.drawer-left {
        left: -360px;
        @include box-shadow($box-shadow-drawer-left);
        &.show {
            left: 0;
        }
    }
    &.drawer-bottom {
        bottom: -110%;
        &.show {
            bottom: 0;
        }
    }
}

.drawer {
    @include drawer();
    @include drawertypes();
}

@include media-breakpoint-up(lg) {
    .drawer {
        z-index: $zindex-modal-backdrop + 1;
    }
}

.drawer-md,
.drawer-sm {
    display: none;
}

@include media-breakpoint-down(md) {
    .drawer-md {
        display: block;
        @include drawer();
        @include drawertypes();
    }
}

@include media-breakpoint-down(sm) {
    .drawer-sm {
        display: block;
        @include drawer();
        @include drawertypes();
    }
}

.drawerheader {
    padding: 0 0.75rem;
    height: $navbar-height;
    display: flex;
    align-items: center;
    border-bottom: $border-width solid $border-color;
    .drawertoggle {
        margin-left: auto;
    }
    .drawerlogo img {
        max-height: calc(#{$navbar-height} - 10px);
    }
}
.drawercontent {
    height: 100%;
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    overflow-y: auto;
}


:target::before {
    content: " ";
    display: block;
    height: ($navbar-height + 10px); /* fixed header height*/
    margin-top: -($navbar-height + 10px); /* negative fixed header height */
    width: 1px;
    pointer-events: none;
}

.pagelayout-embedded :target {
    padding-top: initial;
    margin-top: initial;
}

$right-drawer-width: 320px;

[data-region=right-hand-drawer] {
    display: flex;
    flex-direction: column;
    @include transition(right .2s ease-in-out);

    &.drawer {
        z-index: 1041;
        position: fixed;
        top: $navbar-height;
        right: 0;
        height: calc(100% - #{$navbar-height});
        width: $right-drawer-width;
        box-shadow: -2px 2px 4px rgba(0, 0, 0, .08);
        padding: 0;
        visibility: visible;
        opacity: 1;
    }

    &.hidden {
        display: block;
        right: $right-drawer-width * -1;
        // Turn off visibility so that nothing in the drawer can receive focus when
        // it is hidden.
        visibility: hidden;
        opacity: 0;
        // Delay visibility changes until after the slide right animation has completed.
        @include transition(right .2s ease-in-out, visibility 0s ease-in-out .2s, opacity 0s ease-in-out .2s);
    }
}

@include media-breakpoint-down(sm) {
    [data-region=right-hand-drawer] {
        &.drawer {
            top: 0;
            height: 100%;
            z-index: $zindex-fixed;
        }
    }
    body.drawer-open-left,
    body.drawer-open-right {
        overflow: hidden;
    }
}

.dir-rtl {
    [data-region=right-hand-drawer] {
        box-shadow: 2px 2px 4px rgba(0, 0, 0, .08);
    }
}
