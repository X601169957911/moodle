{"version":3,"sources":["../src/footer-popover.js"],"names":["SELECTORS","FOOTERCONTAINER","FOOTERCONTENT","FOOTERBUTTON","init","container","document","querySelector","footerButton","popover","content","getFooterContent","html","placement","customClass","trigger","addEventListener","e","target","closest","key","innerHTML"],"mappings":"0PAuBA,OACA,O,sDAEMA,CAAAA,CAAS,CAAG,CACdC,eAAe,CAAE,4CADH,CAEdC,aAAa,CAAE,0CAFD,CAGdC,YAAY,CAAE,kCAHA,C,CAMLC,CAAI,CAAG,UAAM,IAChBC,CAAAA,CAAS,CAAGC,QAAQ,CAACC,aAAT,CAAuBP,CAAS,CAACC,eAAjC,CADI,CAEhBO,CAAY,CAAGF,QAAQ,CAACC,aAAT,CAAuBP,CAAS,CAACG,YAAjC,CAFC,CAKtB,cAAEK,CAAF,EAAgBC,OAAhB,CAAwB,CACpBC,OAAO,CAAEC,CADW,CAEpBN,SAAS,CAAEA,CAFS,CAGpBO,IAAI,GAHgB,CAIpBC,SAAS,CAAE,KAJS,CAKpBC,WAAW,CAAE,QALO,CAMpBC,OAAO,CAAE,OANW,CAAxB,EASAT,QAAQ,CAACU,gBAAT,CAA0B,OAA1B,CAAmC,SAAAC,CAAC,CAAI,CACpC,GAAIA,CAAC,CAACC,MAAF,GAAaV,CAAjB,CAA+B,CAC3B,cAAEA,CAAF,EAAgBC,OAAhB,CAAwB,MAAxB,CACH,CACD,GAAI,CAACQ,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBnB,CAAS,CAACC,eAA3B,CAAL,CAAkD,CAC9C,cAAEO,CAAF,EAAgBC,OAAhB,CAAwB,MAAxB,CACH,CACJ,CAPD,KAUAH,QAAQ,CAACU,gBAAT,CAA0B,OAA1B,CAAmC,SAAAC,CAAC,CAAI,CACpC,GAAI,CAACA,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBnB,CAAS,CAACC,eAA3B,CAAL,CAAkD,CAC9C,cAAEO,CAAF,EAAgBC,OAAhB,CAAwB,MAAxB,CACH,CACJ,CAJD,KAOAH,QAAQ,CAACU,gBAAT,CAA0B,SAA1B,CAAqC,SAAAC,CAAC,CAAI,CACtC,GAAc,QAAV,GAAAA,CAAC,CAACG,GAAN,CAAwB,CACpB,cAAEZ,CAAF,EAAgBC,OAAhB,CAAwB,MAAxB,CACH,CACJ,CAJD,CAKH,C,UAQD,GAAME,CAAAA,CAAgB,CAAG,UAAM,CAC3B,MAAOL,CAAAA,QAAQ,CAACC,aAAT,CAAuBP,CAAS,CAACE,aAAjC,EAAgDmB,SAC1D,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Shows the footer content in a popover.\n *\n * @module     theme_boost/footer-popover\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport Popover from './popover';\n\nconst SELECTORS = {\n    FOOTERCONTAINER: '[data-region=\"footer-container-popover\"]',\n    FOOTERCONTENT: '[data-region=\"footer-content-popover\"]',\n    FOOTERBUTTON: '[data-action=\"footer-popover\"]'\n};\n\nexport const init = () => {\n    const container = document.querySelector(SELECTORS.FOOTERCONTAINER);\n    const footerButton = document.querySelector(SELECTORS.FOOTERBUTTON);\n\n    // All jQuery in this code can be replaced when MDL-79179 is integrated.\n    $(footerButton).popover({\n        content: getFooterContent,\n        container: container,\n        html: true,\n        placement: 'top',\n        customClass: 'footer',\n        trigger: 'click'\n    });\n\n    document.addEventListener('focus', e => {\n        if (e.target === footerButton) {\n            $(footerButton).popover('show');\n        }\n        if (!e.target.closest(SELECTORS.FOOTERCONTAINER)) {\n            $(footerButton).popover('hide');\n        }\n    },\n    true);\n\n    document.addEventListener('click', e => {\n        if (!e.target.closest(SELECTORS.FOOTERCONTAINER)) {\n            $(footerButton).popover('hide');\n        }\n    },\n    true);\n\n    document.addEventListener('keydown', e => {\n        if (e.key === 'Escape') {\n            $(footerButton).popover('hide');\n        }\n    });\n};\n\n/**\n * Get the footer content for popover.\n *\n * @returns {String} HTML string\n * @private\n */\nconst getFooterContent = () => {\n    return document.querySelector(SELECTORS.FOOTERCONTENT).innerHTML;\n};\n\nexport {\n    Popover\n};\n"],"file":"footer-popover.min.js"}