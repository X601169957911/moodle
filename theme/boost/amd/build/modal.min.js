"use strict";define(["exports","jquery","./util"],function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function j(a,b,c){return b&&i(a.prototype,b),c&&i(a,c),a}Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c),m="modal",n="4.3.1",o="bs.modal",p=".".concat(o),q=".data-api",r=k["default"].fn[m],s=27,t={backdrop:!0,keyboard:!0,focus:!0,show:!0},u={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},v={HIDE:"hide".concat(p),HIDDEN:"hidden".concat(p),SHOW:"show".concat(p),SHOWN:"shown".concat(p),FOCUSIN:"focusin".concat(p),RESIZE:"resize".concat(p),CLICK_DISMISS:"click.dismiss".concat(p),KEYDOWN_DISMISS:"keydown.dismiss".concat(p),MOUSEUP_DISMISS:"mouseup.dismiss".concat(p),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(p),CLICK_DATA_API:"click".concat(p).concat(q)},w={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},x={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},y=function(){function a(b,c){h(this,a),this._config=this._getConfig(c),this._element=b,this._dialog=b.querySelector(x.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}return j(a,[{key:"toggle",value:function(a){return this._isShown?this.hide():this.show(a)}},{key:"show",value:function(a){var b=this;if(!this._isShown&&!this._isTransitioning){(0,k["default"])(this._element).hasClass(w.FADE)&&(this._isTransitioning=!0);var c=k["default"].Event(v.SHOW,{relatedTarget:a});(0,k["default"])(this._element).trigger(c),this._isShown||c.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),(0,k["default"])(this._element).on(v.CLICK_DISMISS,x.DATA_DISMISS,function(a){return b.hide(a)}),(0,k["default"])(this._dialog).on(v.MOUSEDOWN_DISMISS,function(){(0,k["default"])(b._element).one(v.MOUSEUP_DISMISS,function(a){(0,k["default"])(a.target).is(b._element)&&(b._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return b._showElement(a)}))}}},{key:"hide",value:function(a){var b=this;if(a&&a.preventDefault(),this._isShown&&!this._isTransitioning){var c=k["default"].Event(v.HIDE);if((0,k["default"])(this._element).trigger(c),this._isShown&&!c.isDefaultPrevented()){this._isShown=!1;var d=(0,k["default"])(this._element).hasClass(w.FADE);if(d&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),(0,k["default"])(document).off(v.FOCUSIN),(0,k["default"])(this._element).removeClass(w.SHOW),(0,k["default"])(this._element).off(v.CLICK_DISMISS),(0,k["default"])(this._dialog).off(v.MOUSEDOWN_DISMISS),d){var e=l["default"].getTransitionDurationFromElement(this._element);(0,k["default"])(this._element).one(l["default"].TRANSITION_END,function(a){return b._hideModal(a)}).emulateTransitionEnd(e)}else this._hideModal()}}}},{key:"dispose",value:function(){[window,this._element,this._dialog].forEach(function(a){return(0,k["default"])(a).off(p)}),(0,k["default"])(document).off(v.FOCUSIN),k["default"].removeData(this._element,o),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(a){return a=f({},t,a),l["default"].typeCheckConfig(m,a,u),a}},{key:"_showElement",value:function(a){var b=this,c=(0,k["default"])(this._element).hasClass(w.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),(0,k["default"])(this._dialog).hasClass(w.SCROLLABLE)?this._dialog.querySelector(x.MODAL_BODY).scrollTop=0:this._element.scrollTop=0,c&&l["default"].reflow(this._element),(0,k["default"])(this._element).addClass(w.SHOW),this._config.focus&&this._enforceFocus();var d=k["default"].Event(v.SHOWN,{relatedTarget:a}),e=function(){b._config.focus&&b._element.focus(),b._isTransitioning=!1,(0,k["default"])(b._element).trigger(d)};if(c){var f=l["default"].getTransitionDurationFromElement(this._dialog);(0,k["default"])(this._dialog).one(l["default"].TRANSITION_END,e).emulateTransitionEnd(f)}else e()}},{key:"_enforceFocus",value:function(){var a=this;(0,k["default"])(document).off(v.FOCUSIN).on(v.FOCUSIN,function(b){document!==b.target&&a._element!==b.target&&0===(0,k["default"])(a._element).has(b.target).length&&a._element.focus()})}},{key:"_setEscapeEvent",value:function(){var a=this;this._isShown&&this._config.keyboard?(0,k["default"])(this._element).on(v.KEYDOWN_DISMISS,function(b){b.which===s&&(b.preventDefault(),a.hide())}):this._isShown||(0,k["default"])(this._element).off(v.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){var a=this;this._isShown?(0,k["default"])(window).on(v.RESIZE,function(b){return a.handleUpdate(b)}):(0,k["default"])(window).off(v.RESIZE)}},{key:"_hideModal",value:function(){var a=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){(0,k["default"])(document.body).removeClass(w.OPEN),a._resetAdjustments(),a._resetScrollbar(),(0,k["default"])(a._element).trigger(v.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&((0,k["default"])(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(a){var b=this,c=(0,k["default"])(this._element).hasClass(w.FADE)?w.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=w.BACKDROP,c&&this._backdrop.classList.add(c),(0,k["default"])(this._backdrop).appendTo(document.body),(0,k["default"])(this._element).on(v.CLICK_DISMISS,function(a){return b._ignoreBackdropClick?void(b._ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"===b._config.backdrop?b._element.focus():b.hide()))}),c&&l["default"].reflow(this._backdrop),(0,k["default"])(this._backdrop).addClass(w.SHOW),!a)return;if(!c)return void a();var d=l["default"].getTransitionDurationFromElement(this._backdrop);(0,k["default"])(this._backdrop).one(l["default"].TRANSITION_END,a).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){(0,k["default"])(this._backdrop).removeClass(w.SHOW);var e=function(){b._removeBackdrop(),a&&a()};if((0,k["default"])(this._element).hasClass(w.FADE)){var f=l["default"].getTransitionDurationFromElement(this._backdrop);(0,k["default"])(this._backdrop).one(l["default"].TRANSITION_END,e).emulateTransitionEnd(f)}else e()}else a&&a()}},{key:"_adjustDialog",value:function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&a&&(this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")),this._isBodyOverflowing&&!a&&(this._element.style.paddingRight="".concat(this._scrollbarWidth,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var a=document.body.getBoundingClientRect();this._isBodyOverflowing=a.left+a.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var a=this;if(this._isBodyOverflowing){var b=[].slice.call(document.querySelectorAll(x.FIXED_CONTENT)),c=[].slice.call(document.querySelectorAll(x.STICKY_CONTENT));(0,k["default"])(b).each(function(b,c){var d=c.style.paddingRight,e=(0,k["default"])(c).css("padding-right");(0,k["default"])(c).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+a._scrollbarWidth,"px"))}),(0,k["default"])(c).each(function(b,c){var d=c.style.marginRight,e=(0,k["default"])(c).css("margin-right");(0,k["default"])(c).data("margin-right",d).css("margin-right","".concat(parseFloat(e)-a._scrollbarWidth,"px"))});var d=document.body.style.paddingRight,e=(0,k["default"])(document.body).css("padding-right");(0,k["default"])(document.body).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+this._scrollbarWidth,"px"))}(0,k["default"])(document.body).addClass(w.OPEN)}},{key:"_resetScrollbar",value:function(){var a=[].slice.call(document.querySelectorAll(x.FIXED_CONTENT));(0,k["default"])(a).each(function(a,b){var c=(0,k["default"])(b).data("padding-right");(0,k["default"])(b).removeData("padding-right"),b.style.paddingRight=c?c:""});var b=[].slice.call(document.querySelectorAll("".concat(x.STICKY_CONTENT)));(0,k["default"])(b).each(function(a,b){var c=(0,k["default"])(b).data("margin-right");"undefined"!=typeof c&&(0,k["default"])(b).css("margin-right",c).removeData("margin-right")});var c=(0,k["default"])(document.body).data("padding-right");(0,k["default"])(document.body).removeData("padding-right"),document.body.style.paddingRight=c?c:""}},{key:"_getScrollbarWidth",value:function(){var a=document.createElement("div");a.className=w.SCROLLBAR_MEASURER,document.body.appendChild(a);var b=a.getBoundingClientRect().width-a.clientWidth;return document.body.removeChild(a),b}}],[{key:"_jQueryInterface",value:function(b,c){return this.each(function(){var d=(0,k["default"])(this).data(o),g=f({},t,(0,k["default"])(this).data(),"object"===e(b)&&b?b:{});if(d||(d=new a(this,g),(0,k["default"])(this).data(o,d)),"string"==typeof b){if("undefined"==typeof d[b])throw new TypeError('No method named "'.concat(b,'"'));d[b](c)}else g.show&&d.show(c)})}},{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return t}}]),a}();(0,k["default"])(document).on(v.CLICK_DATA_API,x.DATA_TOGGLE,function(a){var b,c=this,d=l["default"].getSelectorFromElement(this);d&&(b=document.querySelector(d));var e=(0,k["default"])(b).data(o)?"toggle":f({},(0,k["default"])(b).data(),(0,k["default"])(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||a.preventDefault();var g=(0,k["default"])(b).one(v.SHOW,function(a){a.isDefaultPrevented()||g.one(v.HIDDEN,function(){(0,k["default"])(c).is(":visible")&&c.focus()})});y._jQueryInterface.call((0,k["default"])(b),e,this)}),k["default"].fn[m]=y._jQueryInterface,k["default"].fn[m].Constructor=y,k["default"].fn[m].noConflict=function(){return k["default"].fn[m]=r,y._jQueryInterface},a["default"]=y});