"use strict";define(["exports","./sanitizer","jquery","core/popper","./util"],function(a,b,c,d,e){function f(a){return a&&a.__esModule?a:{"default":a}}function g(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){h(a,b,c[b])})}return a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function l(a,b,c){return b&&k(a.prototype,b),c&&k(a,c),a}Object.defineProperty(a,"__esModule",{value:!0});var m=f(c),n=f(d),o=f(e),p="tooltip",q="4.3.1",r="bs.tooltip",s=".".concat(r),t=m["default"].fn[p],u="bs-tooltip",v=new RegExp("(^|\\s)".concat(u,"\\S+"),"g"),w=["sanitize","whiteList","sanitizeFn"],x={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},y={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},z={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:b.DefaultWhitelist},A={SHOW:"show",OUT:"out"},B={HIDE:"hide".concat(s),HIDDEN:"hidden".concat(s),SHOW:"show".concat(s),SHOWN:"shown".concat(s),INSERTED:"inserted".concat(s),CLICK:"click".concat(s),FOCUSIN:"focusin".concat(s),FOCUSOUT:"focusout".concat(s),MOUSEENTER:"mouseenter".concat(s),MOUSELEAVE:"mouseleave".concat(s)},C={FADE:"fade",SHOW:"show"},D={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},E={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},F=function(){function a(b,c){if(j(this,a),"undefined"==typeof n["default"])throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=b,this.config=this._getConfig(c),this.tip=null,this._setListeners()}return l(a,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(a){if(this._isEnabled)if(a){var b=this.constructor.DATA_KEY,c=(0,m["default"])(a.currentTarget).data(b);c||(c=new this.constructor(a.currentTarget,this._getDelegateConfig()),(0,m["default"])(a.currentTarget).data(b,c)),c._activeTrigger.click=!c._activeTrigger.click,c._isWithActiveTrigger()?c._enter(null,c):c._leave(null,c)}else{if((0,m["default"])(this.getTipElement()).hasClass(C.SHOW))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),m["default"].removeData(this.element,this.constructor.DATA_KEY),(0,m["default"])(this.element).off(this.constructor.EVENT_KEY),(0,m["default"])(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&(0,m["default"])(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var a=this;if("none"===(0,m["default"])(this.element).css("display"))throw new Error("Please use show on visible elements");var b=m["default"].Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){(0,m["default"])(this.element).trigger(b);var c=o["default"].findShadowRoot(this.element),d=m["default"].contains(null!==c?c:this.element.ownerDocument.documentElement,this.element);if(b.isDefaultPrevented()||!d)return;var e=this.getTipElement(),f=o["default"].getUID(this.constructor.NAME);e.setAttribute("id",f),this.element.setAttribute("aria-describedby",f),this.setContent(),this.config.animation&&(0,m["default"])(e).addClass(C.FADE);var g="function"==typeof this.config.placement?this.config.placement.call(this,e,this.element):this.config.placement,h=this._getAttachment(g);this.addAttachmentClass(h);var i=this._getContainer();(0,m["default"])(e).data(this.constructor.DATA_KEY,this),m["default"].contains(this.element.ownerDocument.documentElement,this.tip)||(0,m["default"])(e).appendTo(i),(0,m["default"])(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n["default"](this.element,e,{placement:h,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:D.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(b){b.originalPlacement!==b.placement&&a._handlePopperPlacementChange(b)},onUpdate:function(b){return a._handlePopperPlacementChange(b)}}),(0,m["default"])(e).addClass(C.SHOW),"ontouchstart"in document.documentElement&&(0,m["default"])(document.body).children().on("mouseover",null,m["default"].noop);var j=function(){a.config.animation&&a._fixTransition();var b=a._hoverState;a._hoverState=null,(0,m["default"])(a.element).trigger(a.constructor.Event.SHOWN),b===A.OUT&&a._leave(null,a)};if((0,m["default"])(this.tip).hasClass(C.FADE)){var k=o["default"].getTransitionDurationFromElement(this.tip);(0,m["default"])(this.tip).one(o["default"].TRANSITION_END,j).emulateTransitionEnd(k)}else j()}}},{key:"hide",value:function(a){var b=this,c=this.getTipElement(),d=m["default"].Event(this.constructor.Event.HIDE),e=function(){b._hoverState!==A.SHOW&&c.parentNode&&c.parentNode.removeChild(c),b._cleanTipClass(),b.element.removeAttribute("aria-describedby"),(0,m["default"])(b.element).trigger(b.constructor.Event.HIDDEN),null!==b._popper&&b._popper.destroy(),a&&a()};if((0,m["default"])(this.element).trigger(d),!d.isDefaultPrevented()){if((0,m["default"])(c).removeClass(C.SHOW),"ontouchstart"in document.documentElement&&(0,m["default"])(document.body).children().off("mouseover",null,m["default"].noop),this._activeTrigger[E.CLICK]=!1,this._activeTrigger[E.FOCUS]=!1,this._activeTrigger[E.HOVER]=!1,(0,m["default"])(this.tip).hasClass(C.FADE)){var f=o["default"].getTransitionDurationFromElement(c);(0,m["default"])(c).one(o["default"].TRANSITION_END,e).emulateTransitionEnd(f)}else e();this._hoverState=""}}},{key:"update",value:function(){null!==this._popper&&this._popper.scheduleUpdate()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"addAttachmentClass",value:function(a){(0,m["default"])(this.getTipElement()).addClass("".concat(u,"-").concat(a))}},{key:"getTipElement",value:function(){return this.tip=this.tip||(0,m["default"])(this.config.template)[0],this.tip}},{key:"setContent",value:function(){var a=this.getTipElement();this.setElementContent((0,m["default"])(a.querySelectorAll(D.TOOLTIP_INNER)),this.getTitle()),(0,m["default"])(a).removeClass("".concat(C.FADE," ").concat(C.SHOW))}},{key:"setElementContent",value:function(a,c){return"object"===i(c)&&(c.nodeType||c.jquery)?void(this.config.html?(0,m["default"])(c).parent().is(a)||a.empty().append(c):a.text((0,m["default"])(c).text())):void(this.config.html?(this.config.sanitize&&(c=(0,b.sanitizeHtml)(c,this.config.whiteList,this.config.sanitizeFn)),a.html(c)):a.text(c))}},{key:"getTitle",value:function(){var a=this.element.getAttribute("data-original-title");return a||(a="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),a}},{key:"_getOffset",value:function(){var a=this,b={};return"function"==typeof this.config.offset?b.fn=function(b){return b.offsets=g({},b.offsets,a.config.offset(b.offsets,a.element)||{}),b}:b.offset=this.config.offset,b}},{key:"_getContainer",value:function(){return this.config.container===!1?document.body:o["default"].isElement(this.config.container)?(0,m["default"])(this.config.container):(0,m["default"])(document).find(this.config.container)}},{key:"_getAttachment",value:function(a){return y[a.toUpperCase()]}},{key:"_setListeners",value:function(){var a=this,b=this.config.trigger.split(" ");b.forEach(function(b){if("click"===b)(0,m["default"])(a.element).on(a.constructor.Event.CLICK,a.config.selector,function(b){return a.toggle(b)});else if(b!==E.MANUAL){var c=b===E.HOVER?a.constructor.Event.MOUSEENTER:a.constructor.Event.FOCUSIN,d=b===E.HOVER?a.constructor.Event.MOUSELEAVE:a.constructor.Event.FOCUSOUT;(0,m["default"])(a.element).on(c,a.config.selector,function(b){return a._enter(b)}).on(d,a.config.selector,function(b){return a._leave(b)})}}),(0,m["default"])(this.element).closest(".modal").on("hide.bs.modal",function(){a.element&&a.hide()}),this.config.selector?this.config=g({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var a=i(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==a)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(a,b){var c=this.constructor.DATA_KEY;return b=b||(0,m["default"])(a.currentTarget).data(c),b||(b=new this.constructor(a.currentTarget,this._getDelegateConfig()),(0,m["default"])(a.currentTarget).data(c,b)),a&&(b._activeTrigger["focusin"===a.type?E.FOCUS:E.HOVER]=!0),(0,m["default"])(b.getTipElement()).hasClass(C.SHOW)||b._hoverState===A.SHOW?void(b._hoverState=A.SHOW):(clearTimeout(b._timeout),b._hoverState=A.SHOW,b.config.delay&&b.config.delay.show?void(b._timeout=setTimeout(function(){b._hoverState===A.SHOW&&b.show()},b.config.delay.show)):void b.show())}},{key:"_leave",value:function(a,b){var c=this.constructor.DATA_KEY;if(b=b||(0,m["default"])(a.currentTarget).data(c),b||(b=new this.constructor(a.currentTarget,this._getDelegateConfig()),(0,m["default"])(a.currentTarget).data(c,b)),a&&(b._activeTrigger["focusout"===a.type?E.FOCUS:E.HOVER]=!1),!b._isWithActiveTrigger())return clearTimeout(b._timeout),b._hoverState=A.OUT,b.config.delay&&b.config.delay.hide?void(b._timeout=setTimeout(function(){b._hoverState===A.OUT&&b.hide()},b.config.delay.hide)):void b.hide()}},{key:"_isWithActiveTrigger",value:function(){for(var a in this._activeTrigger)if(this._activeTrigger[a])return!0;return!1}},{key:"_getConfig",value:function(a){var c=(0,m["default"])(this.element).data();return Object.keys(c).forEach(function(a){w.indexOf(a)!==-1&&delete c[a]}),a=g({},this.constructor.Default,c,"object"===i(a)&&a?a:{}),"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),"number"==typeof a.title&&(a.title=a.title.toString()),"number"==typeof a.content&&(a.content=a.content.toString()),o["default"].typeCheckConfig(p,a,this.constructor.DefaultType),a.sanitize&&(a.template=(0,b.sanitizeHtml)(a.template,a.whiteList,a.sanitizeFn)),a}},{key:"_getDelegateConfig",value:function(){var a={};if(this.config)for(var b in this.config)this.constructor.Default[b]!==this.config[b]&&(a[b]=this.config[b]);return a}},{key:"_cleanTipClass",value:function(){var a=(0,m["default"])(this.getTipElement()),b=a.attr("class").match(v);null!==b&&b.length&&a.removeClass(b.join(""))}},{key:"_handlePopperPlacementChange",value:function(a){var b=a.instance;this.tip=b.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(a.placement))}},{key:"_fixTransition",value:function(){var a=this.getTipElement(),b=this.config.animation;null===a.getAttribute("x-placement")&&((0,m["default"])(a).removeClass(C.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=b)}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,m["default"])(this).data(r),d="object"===i(b)&&b;if((c||!/dispose|hide/.test(b))&&(c||(c=new a(this,d),(0,m["default"])(this).data(r,c)),"string"==typeof b)){if("undefined"==typeof c[b])throw new TypeError('No method named "'.concat(b,'"'));c[b]()}})}},{key:"VERSION",get:function(){return q}},{key:"Default",get:function(){return z}},{key:"NAME",get:function(){return p}},{key:"DATA_KEY",get:function(){return r}},{key:"Event",get:function(){return B}},{key:"EVENT_KEY",get:function(){return s}},{key:"DefaultType",get:function(){return x}}]),a}();m["default"].fn[p]=F._jQueryInterface,m["default"].fn[p].Constructor=F,m["default"].fn[p].noConflict=function(){return m["default"].fn[p]=t,F._jQueryInterface},a["default"]=F});