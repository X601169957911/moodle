"use strict";define(["exports","jquery","./util"],function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function j(a,b,c){return b&&i(a.prototype,b),c&&i(a,c),a}Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c),m="carousel",n="4.3.1",o="bs.carousel",p=".".concat(o),q=".data-api",r=k["default"].fn[m],s=37,t=39,u=500,v=40,w={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},x={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},y={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},z={SLIDE:"slide".concat(p),SLID:"slid".concat(p),KEYDOWN:"keydown".concat(p),MOUSEENTER:"mouseenter".concat(p),MOUSELEAVE:"mouseleave".concat(p),TOUCHSTART:"touchstart".concat(p),TOUCHMOVE:"touchmove".concat(p),TOUCHEND:"touchend".concat(p),POINTERDOWN:"pointerdown".concat(p),POINTERUP:"pointerup".concat(p),DRAG_START:"dragstart".concat(p),LOAD_DATA_API:"load".concat(p).concat(q),CLICK_DATA_API:"click".concat(p).concat(q)},A={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},B={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},C={TOUCH:"touch",PEN:"pen"},D=function(){function a(b,c){h(this,a),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(c),this._element=b,this._indicatorsElement=this._element.querySelector(B.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}return j(a,[{key:"next",value:function(){this._isSliding||this._slide(y.NEXT)}},{key:"nextWhenVisible",value:function(){!document.hidden&&(0,k["default"])(this._element).is(":visible")&&"hidden"!==(0,k["default"])(this._element).css("visibility")&&this.next()}},{key:"prev",value:function(){this._isSliding||this._slide(y.PREV)}},{key:"pause",value:function(a){a||(this._isPaused=!0),this._element.querySelector(B.NEXT_PREV)&&(l["default"].triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(a){a||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}},{key:"to",value:function(a){var b=this;this._activeElement=this._element.querySelector(B.ACTIVE_ITEM);var c=this._getItemIndex(this._activeElement);if(!(a>this._items.length-1||a<0)){if(this._isSliding)return void(0,k["default"])(this._element).one(z.SLID,function(){return b.to(a)});if(c===a)return this.pause(),void this.cycle();var d=a>c?y.NEXT:y.PREV;this._slide(d,this._items[a])}}},{key:"dispose",value:function(){(0,k["default"])(this._element).off(p),k["default"].removeData(this._element,o),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}},{key:"_getConfig",value:function(a){return a=f({},w,a),l["default"].typeCheckConfig(m,a,x),a}},{key:"_handleSwipe",value:function(){var a=Math.abs(this.touchDeltaX);if(!(a<=v)){var b=a/this.touchDeltaX;b>0&&this.prev(),b<0&&this.next()}}},{key:"_addEventListeners",value:function(){var a=this;this._config.keyboard&&(0,k["default"])(this._element).on(z.KEYDOWN,function(b){return a._keydown(b)}),"hover"===this._config.pause&&(0,k["default"])(this._element).on(z.MOUSEENTER,function(b){return a.pause(b)}).on(z.MOUSELEAVE,function(b){return a.cycle(b)}),this._config.touch&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){var a=this;if(this._touchSupported){var b=function(b){a._pointerEvent&&C[b.originalEvent.pointerType.toUpperCase()]?a.touchStartX=b.originalEvent.clientX:a._pointerEvent||(a.touchStartX=b.originalEvent.touches[0].clientX)},c=function(b){b.originalEvent.touches&&b.originalEvent.touches.length>1?a.touchDeltaX=0:a.touchDeltaX=b.originalEvent.touches[0].clientX-a.touchStartX},d=function(b){a._pointerEvent&&C[b.originalEvent.pointerType.toUpperCase()]&&(a.touchDeltaX=b.originalEvent.clientX-a.touchStartX),a._handleSwipe(),"hover"===a._config.pause&&(a.pause(),a.touchTimeout&&clearTimeout(a.touchTimeout),a.touchTimeout=setTimeout(function(b){return a.cycle(b)},u+a._config.interval))};(0,k["default"])(this._element.querySelectorAll(B.ITEM_IMG)).on(z.DRAG_START,function(a){return a.preventDefault()}),this._pointerEvent?((0,k["default"])(this._element).on(z.POINTERDOWN,function(a){return b(a)}),(0,k["default"])(this._element).on(z.POINTERUP,function(a){return d(a)}),this._element.classList.add(A.POINTER_EVENT)):((0,k["default"])(this._element).on(z.TOUCHSTART,function(a){return b(a)}),(0,k["default"])(this._element).on(z.TOUCHMOVE,function(a){return c(a)}),(0,k["default"])(this._element).on(z.TOUCHEND,function(a){return d(a)}))}}},{key:"_keydown",value:function(a){if(!/input|textarea/i.test(a.target.tagName))switch(a.which){case s:a.preventDefault(),this.prev();break;case t:a.preventDefault(),this.next()}}},{key:"_getItemIndex",value:function(a){return this._items=a&&a.parentNode?[].slice.call(a.parentNode.querySelectorAll(B.ITEM)):[],this._items.indexOf(a)}},{key:"_getItemByDirection",value:function(a,b){var c=a===y.NEXT,d=a===y.PREV,e=this._getItemIndex(b),f=this._items.length-1,g=d&&0===e||c&&e===f;if(g&&!this._config.wrap)return b;var h=a===y.PREV?-1:1,i=(e+h)%this._items.length;return i===-1?this._items[this._items.length-1]:this._items[i]}},{key:"_triggerSlideEvent",value:function(a,b){var c=this._getItemIndex(a),d=this._getItemIndex(this._element.querySelector(B.ACTIVE_ITEM)),e=k["default"].Event(z.SLIDE,{relatedTarget:a,direction:b,from:d,to:c});return(0,k["default"])(this._element).trigger(e),e}},{key:"_setActiveIndicatorElement",value:function(a){if(this._indicatorsElement){var b=[].slice.call(this._indicatorsElement.querySelectorAll(B.ACTIVE));(0,k["default"])(b).removeClass(A.ACTIVE);var c=this._indicatorsElement.children[this._getItemIndex(a)];c&&(0,k["default"])(c).addClass(A.ACTIVE)}}},{key:"_slide",value:function(a,b){var c,d,e,f=this,g=this._element.querySelector(B.ACTIVE_ITEM),h=this._getItemIndex(g),i=b||g&&this._getItemByDirection(a,g),j=this._getItemIndex(i),m=Boolean(this._interval);if(a===y.NEXT?(c=A.LEFT,d=A.NEXT,e=y.LEFT):(c=A.RIGHT,d=A.PREV,e=y.RIGHT),i&&(0,k["default"])(i).hasClass(A.ACTIVE))return void(this._isSliding=!1);var n=this._triggerSlideEvent(i,e);if(!n.isDefaultPrevented()&&g&&i){this._isSliding=!0,m&&this.pause(),this._setActiveIndicatorElement(i);var o=k["default"].Event(z.SLID,{relatedTarget:i,direction:e,from:h,to:j});if((0,k["default"])(this._element).hasClass(A.SLIDE)){(0,k["default"])(i).addClass(d),l["default"].reflow(i),(0,k["default"])(g).addClass(c),(0,k["default"])(i).addClass(c);var p=parseInt(i.getAttribute("data-interval"),10);p?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=p):this._config.interval=this._config.defaultInterval||this._config.interval;var q=l["default"].getTransitionDurationFromElement(g);(0,k["default"])(g).one(l["default"].TRANSITION_END,function(){(0,k["default"])(i).removeClass("".concat(c," ").concat(d)).addClass(A.ACTIVE),(0,k["default"])(g).removeClass("".concat(A.ACTIVE," ").concat(d," ").concat(c)),f._isSliding=!1,setTimeout(function(){return(0,k["default"])(f._element).trigger(o)},0)}).emulateTransitionEnd(q)}else(0,k["default"])(g).removeClass(A.ACTIVE),(0,k["default"])(i).addClass(A.ACTIVE),this._isSliding=!1,(0,k["default"])(this._element).trigger(o);m&&this.cycle()}}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=(0,k["default"])(this).data(o),d=f({},w,(0,k["default"])(this).data());"object"===e(b)&&(d=f({},d,b));var g="string"==typeof b?b:d.slide;if(c||(c=new a(this,d),(0,k["default"])(this).data(o,c)),"number"==typeof b)c.to(b);else if("string"==typeof g){if("undefined"==typeof c[g])throw new TypeError('No method named "'.concat(g,'"'));c[g]()}else d.interval&&d.ride&&(c.pause(),c.cycle())})}},{key:"_dataApiClickHandler",value:function(b){var c=l["default"].getSelectorFromElement(this);if(c){var d=(0,k["default"])(c)[0];if(d&&(0,k["default"])(d).hasClass(A.CAROUSEL)){var e=f({},(0,k["default"])(d).data(),(0,k["default"])(this).data()),g=this.getAttribute("data-slide-to");g&&(e.interval=!1),a._jQueryInterface.call((0,k["default"])(d),e),g&&(0,k["default"])(d).data(o).to(g),b.preventDefault()}}}},{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return w}}]),a}();(0,k["default"])(document).on(z.CLICK_DATA_API,B.DATA_SLIDE,D._dataApiClickHandler),(0,k["default"])(window).on(z.LOAD_DATA_API,function(){for(var a=[].slice.call(document.querySelectorAll(B.DATA_RIDE)),b=0,c=a.length;b<c;b++){var d=(0,k["default"])(a[b]);D._jQueryInterface.call(d,d.data())}}),k["default"].fn[m]=D._jQueryInterface,k["default"].fn[m].Constructor=D,k["default"].fn[m].noConflict=function(){return k["default"].fn[m]=r,D._jQueryInterface},a["default"]=D});