{"version":3,"sources":["../src/secondarynav.js"],"names":["backdropPromise","getBackdrop","Templates","render","then","html","ModalBackdrop","fail","Notification","exception","sel","ids","secondarynav","pagecontent","actions","togglebutton","closebutton","closeNav","secondaryNav","document","querySelector","pageContent","backdrop","hide","style","overflow","showNav","setZIndex","show","togglenavigation","toggleButton","closeButton","addEventListener","window","outerWidth"],"mappings":"6MAuBA,OACA,O,sDAEIA,CAAAA,CAAe,CAAG,C,CAEhBC,CAAW,CAAG,UAAM,CACtB,GAAI,CAACD,CAAL,CAAsB,CAClBA,CAAe,CAAGE,UAAUC,MAAV,CAAiB,qBAAjB,CAAwC,EAAxC,EACbC,IADa,CACR,SAASC,CAAT,CAAe,CACjB,MAAO,IAAIC,UAAJ,CAAkBD,CAAlB,CACV,CAHa,EAIbE,IAJa,CAIRC,YAAY,CAACC,SAJL,CAKrB,CACD,MAAOT,CAAAA,CACV,C,CAEKU,CAAG,CAAG,CACRC,GAAG,CAAE,CACDC,YAAY,CAAE,wBADb,CAEDC,WAAW,CAAE,eAFZ,CADG,CAKRC,OAAO,CAAE,CACLC,YAAY,CAAE,uCADT,CAELC,WAAW,CAAE,wCAFR,CALD,C,CAWNC,CAAQ,CAAG,UAAM,IACbC,CAAAA,CAAY,CAAGC,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACC,GAAJ,CAAQC,YAA/B,CADF,CAEbS,CAAW,CAAGF,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACC,GAAJ,CAAQE,WAA/B,CAFD,CAInB,gBAAU,QAAV,CAAoBK,CAApB,CAAkC,MAAlC,EACAjB,CAAW,GAAGG,IAAd,CAAmB,SAAAkB,CAAQ,CAAI,CAC3BA,CAAQ,CAACC,IAAT,GACAF,CAAW,CAACG,KAAZ,CAAkBC,QAAlB,CAA6B,MAChC,CAHD,CAIH,C,CAEKC,CAAO,CAAG,UAAM,IACZR,CAAAA,CAAY,CAAGC,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACC,GAAJ,CAAQC,YAA/B,CADH,CAEZS,CAAW,CAAGF,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACC,GAAJ,CAAQE,WAA/B,CAFF,CAIlB,gBAAU,KAAV,CAAiBK,CAAjB,CAA+B,MAA/B,EACAjB,CAAW,GAAGG,IAAd,CAAmB,SAAAkB,CAAQ,CAAI,CAC3BA,CAAQ,CAACK,SAAT,CAAmB,IAAnB,EACAL,CAAQ,CAACM,IAAT,GACAP,CAAW,CAACG,KAAZ,CAAkBC,QAAlB,CAA6B,QAChC,CAJD,CAKH,C,oBAE+B,QAAnBI,CAAAA,gBAAmB,EAAM,IAC5BC,CAAAA,CAAY,CAAGX,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACI,OAAJ,CAAYC,YAAnC,CADa,CAE5BgB,CAAW,CAAGZ,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACI,OAAJ,CAAYE,WAAnC,CAFc,CAG5BE,CAAY,CAAGC,QAAQ,CAACC,aAAT,CAAuBV,CAAG,CAACC,GAAJ,CAAQC,YAA/B,CAHa,CAKlC,GAAIkB,CAAJ,CAAkB,CACdA,CAAY,CAACE,gBAAb,CAA8B,OAA9B,CAAuC,UAAM,CACzC,GAAI,gBAAU,KAAV,CAAiBd,CAAjB,CAA+B,MAA/B,CAAJ,CAA4C,CACxCD,CAAQ,EACX,CAFD,IAEO,CACHS,CAAO,EACV,CACJ,CAND,CAOH,CACD,GAAIK,CAAJ,CAAiB,CACbA,CAAW,CAACC,gBAAZ,CAA6B,OAA7B,CAAsC,UAAM,CACxCf,CAAQ,EACX,CAFD,CAGH,CAEDgB,MAAM,CAACD,gBAAP,CAAwB,QAAxB,CAAkC,UAAY,CAC1C,GAAwB,GAApB,CAAAC,MAAM,CAACC,UAAX,CAA6B,CACzBjB,CAAQ,EACX,CACJ,CAJD,CAKH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Toggling the visibility of the secondary navigation on mobile.\n *\n * @package    theme_boost\n * @copyright  2021 Bas Brands\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {classUtil} from 'core/utils';\nimport ModalBackdrop from 'core/modal_backdrop';\nimport Templates from 'core/templates';\n\nlet backdropPromise = 0;\n\nconst getBackdrop = () => {\n    if (!backdropPromise) {\n        backdropPromise = Templates.render('core/modal_backdrop', {})\n            .then(function(html) {\n                return new ModalBackdrop(html);\n            })\n            .fail(Notification.exception);\n    }\n    return backdropPromise;\n};\n\nconst sel = {\n    ids: {\n        secondarynav: '.secondarynavcontainer',\n        pagecontent: '#page-wrapper'\n    },\n    actions: {\n        togglebutton: '[data-action=\"view-secondary-menu\"]',\n        closebutton: '[data-action=\"close-secondary-menu\"]'\n    }\n};\n\nconst closeNav = () => {\n    const secondaryNav = document.querySelector(sel.ids.secondarynav);\n    const pageContent = document.querySelector(sel.ids.pagecontent);\n\n    classUtil('remove', secondaryNav, 'show');\n    getBackdrop().then(backdrop => {\n        backdrop.hide();\n        pageContent.style.overflow = 'auto';\n    });\n};\n\nconst showNav = () => {\n    const secondaryNav = document.querySelector(sel.ids.secondarynav);\n    const pageContent = document.querySelector(sel.ids.pagecontent);\n\n    classUtil('add', secondaryNav, 'show');\n    getBackdrop().then(backdrop => {\n        backdrop.setZIndex(1020);\n        backdrop.show();\n        pageContent.style.overflow = 'hidden';\n    });\n};\n\nexport const togglenavigation = () => {\n    const toggleButton = document.querySelector(sel.actions.togglebutton);\n    const closeButton = document.querySelector(sel.actions.closebutton);\n    const secondaryNav = document.querySelector(sel.ids.secondarynav);\n\n    if (toggleButton) {\n        toggleButton.addEventListener('click', () => {\n            if (classUtil('has', secondaryNav, 'show')) {\n                closeNav();\n            } else {\n                showNav();\n            }\n        });\n    }\n    if (closeButton) {\n        closeButton.addEventListener('click', () => {\n            closeNav();\n        });\n    }\n\n    window.addEventListener('resize', function () {\n        if (window.outerWidth > 768) {\n            closeNav();\n        }\n    });\n};\n"],"file":"secondarynav.min.js"}